<div class="page" id="home">
    <div id="header" class="bar">
        LipSy
    </div>
    <div id="content">
    	<div class="row languages panel">
    		<h3>Choose Language:</h3>
    	</div>
    	
    	<div class="row panel">
    		<div class="small-6  columns">
    			<a href="#" id="add" class="button"> Add <br> Word </a>
			</div>
    		<div class="small-6 columns">
				<a href="#" class="button"> Search <br> Word </a>
			</div>
			
			<div class="columns">
				<a href="#" id="practice" class="button"> Practice Language </a>
			</div>
    	</div>
	</div>
</div>

<div id="wordModal" class="reveal-modal" data-reveal>
	
</div>

<script type="text/javascript">
    (function () {
    	
    	var languages = nova.application.currentPage.languages;
		var chosen = nova.application.currentPage.chosen;
    	    	
		onLoad(languages, chosen);
		
		$(".language").on("click tap", function(){
			$(".language img").removeClass('chosen');
			$(this).find("img").addClass("chosen");
			
			var id = $(this).attr('data-attribute');
			
			app.execute.updateApp('latest_language', id);
			
			for(i=0;i<languages.length;i++) {
				if(languages[i].id == id) {
					$("#practice").html("Practice " + languages[i].name);	
					$("#myModal img").attr('src', 'theme/img/'+languages[i].image);	
				}
			}
			
		});
		
		$("#add").on("click tap", function(){
			 $('#wordModal').foundation('reveal', 'open', 'dialogs/addTranslation.html');
		});
		
		$("#search").on("click tap", function(){
			
		});
		
		$("#practice").on("click tap", function(){
			
		});
    })();
    
    function onLoad(languages, chosen) {		
		$('.languages h3').nextAll().remove();
		    
		app.log("Chosen: " + chosen);
		for(i=0;i<languages.length;i++) {
			
			if(languages[i].id == chosen.id) {
				var language = '<div class="small-4 columns language" data-attribute="'+languages[i].id+'"><img class="chosen" src="theme/img/'+languages[i].image+'"></div>';
				
				$("#myModal img").attr('src', 'theme/img/'+languages[i].image);
				$("#practice").html("Practice " + languages[i].name);
			} else {
				var language = '<div class="small-4 columns language" data-attribute="'+languages[i].id+'"><img src="theme/img/'+languages[i].image+'"></div>';
			}
			
			
			$(".languages").append(language);
		}
    }
</script>